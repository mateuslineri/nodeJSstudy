<%- include('partials/header.ejs') %>
<%- include('partials/nav.ejs') %>

<div class="container">
  <h1 class="mt-3"> <%= pergunta.titulo %> </h1>
  
  <div class="mt-4">
    <p> <%= pergunta.pergunta %> </p>
  </div>
  
  <hr>
  
  <div class="card mt-3">
    <form action="/salvar_resposta" method="POST">
      <div class="card-body">
        <h4>Digite sua resposta!</h4>

        <hr>

        <div class="form-group">
          <label for="corpo">Resposta: </label>
          <textarea name="corpo" id="corpo" class="form-control" rows=5 placeholder="Resposta..."></textarea>
          <input type="number" name="pergunta_id" id="pergunta_id" value="<%= pergunta.id %>" hidden>
        </div>
      </div>

      <div class="card-footer">
        <button class="btn btn-primary">Responder</button>
      </div>
    </form>
  </div>

  <hr>

  <% if (respostas.length > 0) { %>
    <h4 class="mt-5 mb-3">Respostas</h4>

    <% respostas.forEach(resposta => { %>
      <div class="card mb-4">
        <div class="card-body">
          <h5> <%= resposta.corpo %> </h5>
          <p>Respondido em <%= resposta.createdAt %></p>
        </div>
      </div>
    <% }) %>
  <% } else { %> 
    <h5> Ningu√©m respondeu essa pergunta ainda. </h5>
  <% } %>
</div>

<%- include('partials/footer.ejs') %>